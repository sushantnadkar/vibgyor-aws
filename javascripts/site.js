function loadJSON(e,t){var o=new XMLHttpRequest;o.overrideMimeType("application/json"),o.open("GET",e,!0),o.onreadystatechange=function(){4==o.readyState&&"200"==o.status&&t(o.responseText)},o.send(null)}var url="data/data.js";window.onload=loadJSON(url,function(e){function t(e){$("#search").addClass("loading");var t=[],o=$("#language .choices__item.choices__item--selectable").data("value"),n=$("#category .choices__item.choices__item--selectable").data("value");t=0!==$(".input-field.second-wrap input#search")[0].value.length?s.search($(".input-field.second-wrap input#search")[0].value):e,"Language"!==o&&("E"===o?t=t.filter(function(e){return e.bookno.split("-")[0].indexOf("E")>-1}):"M"===o&&(t=t.filter(function(e){return e.bookno.split("-")[0].indexOf("M")>-1}))),"Category"!==n&&(1===n?t=t.filter(function(e){return e.bookno.split("-")[0].indexOf("1")>-1}):2===n?t=t.filter(function(e){return e.bookno.split("-")[0].indexOf("2")>-1}):3===n?t=t.filter(function(e){return e.bookno.split("-")[0].indexOf("3")>-1}):4===n?t=t.filter(function(e){return e.bookno.split("-")[0].indexOf("4")>-1}):5===n?t=t.filter(function(e){return e.bookno.split("-")[0].indexOf("5")>-1}):6===n?t=t.filter(function(e){return e.bookno.split("-")[0].indexOf("6")>-1}):7===n?t=t.filter(function(e){return e.bookno.split("-")[0].indexOf("7")>-1}):8===n?t=t.filter(function(e){return e.bookno.split("-")[0].indexOf("8")>-1}):9===n&&(t=t.filter(function(e){return e.bookno.split("-")[0].indexOf("9")>-1}))),$("tbody").empty().append('<tr><td class="loading-spinner"></td>'),setTimeout(function(){$("tbody").empty();for(var e=0;e<t.length;e++)$("tbody").append('<tr class="row100 body"><td class="cell100 column1">'+t[e].bookno+'</td><td class="cell100 column2">'+t[e].bookname+'</td><td class="cell100 column3">'+t[e].author+"</td></tr>");$("#search").removeClass("loading")},1500)}var o=JSON.parse(e);for(l=0;l<o.flagshipevents.length;l++)0!==$("#flagship-events .row").length&&$("#flagship-events .row").append('<div class="col-xs-12 col-md-6"><div style="background-image:url( '+o.flagshipevents[l].image+' )"><h4>'+o.flagshipevents[l].name+"</h4></div></div>"),0!==$("#e-page").length&&$("#e-page").append('<div class="row event"><div class="col-xs-12 col-md-6"><div class="row event-img" style="background-image:url('+o.events[l].image+')"></div></div><div class="col-xs-12 col-md-6"><div class="row event-desc"><div class="col-xs-12 col-md-12"><h5>'+o.events[l].name+'</h5></div><div id="'+o.events[l].id+'" class="collapse text col-xs-12 col-md-12" aria-expanded="false">'+o.events[l].description+'</div><a role="button" class="collapsed" data-toggle="collapse" href="#'+o.events[l].id+'" aria-expanded="false" aria-controls="'+o.events[l].id+'"></a><div class="col-xs-12 col-md-12"></br><strong>Where: </strong>'+o.events[l].when+'</div><div class="col-xs-12 col-md-12"></br><strong>When: </strong>'+o.events[l].where+"</p></div></div></div></div>");for(l=0;l<o.testimonials.length;l++)if(0!==$("#t-page").length){var n="",i="";l%2==0?(n="float-left",i="text-right"):(n="float-right",i="text-left"),$("#t-page").append('<div class="row testimonial"><div class="col-md-8 quote"><img class="testimonial-img rounded-circle '+n+'" src="'+o.testimonials[l].image+'"'+o.testimonials[l].name+"></img><p>"+o.testimonials[l].quote+'</p></div><div class="col-md-8 attribution"><p class="'+i+' name">'+o.testimonials[l].name+'</p><p class="'+i+' title">'+o.testimonials[l].title+'</p><p class="'+i+' company">'+o.testimonials[l].company+"</p></div></div>")}for(l=0;l<o.galleryimages.length;l++)0!==$("#gallery-container .gallery").length&&$("#gallery-container .gallery").append('<div class="img-container" style="background-image: url('+o.galleryimages[l].image+')"><img src="'+o.galleryimages[l].image+'"'+o.galleryimages[l].caption+'><a href="#"><div class="caption text-center"><p>'+o.galleryimages[l].caption+"</p></div></a></div>");for(var l=0;l<o.booklist.length;l++)0!==$("tbody").length&&$("tbody").append('<tr class="row100 body"><td class="cell100 column1">'+o.booklist[l].bookno+'</td><td class="cell100 column2">'+o.booklist[l].bookname+'</td><td class="cell100 column3">'+o.booklist[l].author+"</td></tr>"),0!==$("tbody").length&&$(".loading-spinner").parent().remove();if($(".img-container a").on("touchstart touched",function(){$(this).focus()}),0!==$(".limiter").length){var a={shouldSort:!0,tokenize:!0,matchAllTokens:!0,findAllMatches:!0,threshold:.6,location:0,distance:100,maxPatternLength:32,minMatchCharLength:5,keys:["bookname","author"]},s=new Fuse(o.booklist,a);$(".input-field.second-wrap input#search, #language .choices__item.choices__item--selectable").on("keydown",{booklist:o.booklist},function(e){13===e.keyCode&&(t(e.data.booklist),$("html,body").animate({scrollTop:parseInt($(".s003").css("height"),10)-30},"slow"))}),$(".input-field.third-wrap button.btn-search").on("click",{booklist:o.booklist},function(e){t(e.data.booklist),$("html,body").animate({scrollTop:parseInt($(".s003").css("height"),10)-30},"slow")})}});